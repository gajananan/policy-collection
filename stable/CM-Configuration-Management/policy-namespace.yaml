apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  name: policy-namespace
  annotations:
    policy.open-cluster-management.io/standards: NIST SP 800-53
    policy.open-cluster-management.io/categories: CM Configuration Management
    policy.open-cluster-management.io/controls: CM-2 Baseline Configuration
    integrityshield.io/message: H4sIAAAAAAAAA5VUTW/bMAy9+1cQ2aHAUGXdhgFDbm02DD20KJpil6EHxmISLbJkSLKXYNh/Hy1HiZ2PNtXJFslH8pF6WKqf5LyyZgSl1SpfD21JRuS68oGcKNDgnAoyYajsh/pjtlRGjuAhumYFBZQYcJQBGCwoYYjmx5eYExvQGBswcArf+MEZeXxAI9FJP4L728kTTB7g69WV+PL5zPgcA82tU8QA4zsYWzNT88rFIuBu63oumjXBWR2xxCe4QU9aGerDZr6kvOnPcZxU8e46D5FYZWbWFWyTyuNUExM4Q+0bcjZ8BSpKzUVvGBJgp78pD99opoyKIPG+OfjWiaXAdnK9ojdjTB7dcaZzfKyCVsgV09YxdZ/OSRbgHYQF7fcd44cHQaA82JqcU1KSgem6jXWUs5+ZQ4mOK+KuoUZdEXCCE0jDTm2eGFKF9Qi0/bPXauxuQprJt67bEACtmGLJZPwaLKspifeD555dma1d0gwrHXoO7UT3J52OgNyyQaHJ6WldMkrB41xgTT03eGEx+nO+T80w4Q0UNFi7FuGidFZeHAR3t6uzO+kc25AufbwpDJsJIbI37+lGWTRX19ze8C/P+IjGTFuLONCaMsU+0qwjSen2MCCRtU36WMWd5tp/OFuVI/4q/Qt1Z76K84jTFKc1cJto9+B2OV5l54DPV6o6wmZs7Ihcn+YmvehNBtYNqToiLoBFOlQsioMnV9FgsxAh7m4rsXK8F3pdo9KNAO5g+0+twJAvvq/4gXu/S9Uk+7skfq9kauWsaQq+BO6fVYxD4dZctgLg28dXD57/Zf8B64RAJNoGAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEtCQUFCQ2dBMEZpRUVDOFZXV2MvQlNhOXE3cENPcCtvcnBLeFFhdndGQW1BL1NIVVdISE5wWjI1bGNrQmwKYm5SbGNuQnlhWE5sTG1OdmJRQUtDUkNuNml1a3JGQnEvTzB5Qy80MTV4aVpPZE5Pc2VyOG94OXNUc0NaWVVLVQpJY1BWeHFUMkZPSS8vcWsydi9aT2ZaR3Btak12ckNYMXQ0RlRTb0YzeW91ek9BR05oaWpxWDZSQk1icTI3MkFNCllPcGZRdzVmTkVQclJMY0N3R1NqdCs3M1FySzRHaDBSYkVhcHdJa2ZtQXRrVXg5OGxEMXBrd0pwaDVZZnAybXMKaWxVWmZGQVMwcWprUStRUEQra1dMVHlodlpBQ1FTTm9DRkRLUFB6RWN3MDlJZWV0RE9KVzhwVU5EeXRLL3NnRQpkcjBuakhJSzk5T2xha0pDQlNxNmtJQ1Y4Y3NIK1g1dnIwZ1BoVW90YWZ6eWtseGZHWUhjY0tUbytNOFZMeHd2CmxxSm14MFQwbno1NVVhNEJEVElKTWVFbkl0VS9WbXIxVElIbVE0aW1IVlBSUDMyb09tUlNUM3l3Q0JMeXJVTGkKV0RTbld0MjJzeWpvcDNJU2V2S2RBOEk0dEhXcVJBaWtlUGltWVQ5VUZrejNtdmhnRisvYjRRdHBnV3JQYm5DRApvMWZHWmlNMzdOZWo3eGpWdHFwbU5vTmYwSU9sclJHTURFaENRYUVnek95Y3FHdlBTZTRZOUMxeGtUd1lSTWZLCmMyYTMvVWU1WnAvdVR5dXVBWW9CL1hqL2p3LzAxMVhCVjZ5enZpTT0KPVFubW0KLS0tLS1FTkQgUEdQIFNJR05BVFVSRS0tLS0tCg==
spec:
  remediationAction: inform
  disabled: false
  policy-templates:
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-namespace-example
        spec:
          remediationAction: inform # the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction.
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["default"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                kind: Namespace # must have namespace 'prod'
                apiVersion: v1
                metadata:
                  name: prod
---
apiVersion: policy.open-cluster-management.io/v1
kind: PlacementBinding
metadata:
  name: binding-policy-namespace
  annotations:
    integrityshield.io/message: H4sIAAAAAAAAA5VUTW/bMAy9+1cQ2aHAUGXdhgFDbm02DD20KJpil6EHxmISLbJkSLKXYNh/Hy1HiZ2PNtXJFslH8pF6WKqf5LyyZgSl1SpfD21JRuS68oGcKNDgnAoyYajsh/pjtlRGjuAhumYFBZQYcJQBGCwoYYjmx5eYExvQGBswcArf+MEZeXxAI9FJP4L728kTTB7g69WV+PL5zPgcA82tU8QA4zsYWzNT88rFIuBu63oumjXBWR2xxCe4QU9aGerDZr6kvOnPcZxU8e46D5FYZWbWFWyTyuNUExM4Q+0bcjZ8BSpKzUVvGBJgp78pD99opoyKIPG+OfjWiaXAdnK9ojdjTB7dcaZzfKyCVsgV09YxdZ/OSRbgHYQF7fcd44cHQaA82JqcU1KSgem6jXWUs5+ZQ4mOK+KuoUZdEXCCE0jDTm2eGFKF9Qi0/bPXauxuQprJt67bEACtmGLJZPwaLKspifeD555dma1d0gwrHXoO7UT3J52OgNyyQaHJ6WldMkrB41xgTT03eGEx+nO+T80w4Q0UNFi7FuGidFZeHAR3t6uzO+kc25AufbwpDJsJIbI37+lGWTRX19ze8C/P+IjGTFuLONCaMsU+0qwjSen2MCCRtU36WMWd5tp/OFuVI/4q/Qt1Z76K84jTFKc1cJto9+B2OV5l54DPV6o6wmZs7Ihcn+YmvehNBtYNqToiLoBFOlQsioMnV9FgsxAh7m4rsXK8F3pdo9KNAO5g+0+twJAvvq/4gXu/S9Uk+7skfq9kauWsaQq+BO6fVYxD4dZctgLg28dXD57/Zf8B64RAJNoGAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEtCQUFCQ2dBMEZpRUVDOFZXV2MvQlNhOXE3cENPcCtvcnBLeFFhdndGQW1BL1NIVVdISE5wWjI1bGNrQmwKYm5SbGNuQnlhWE5sTG1OdmJRQUtDUkNuNml1a3JGQnEvTzB5Qy80MTV4aVpPZE5Pc2VyOG94OXNUc0NaWVVLVQpJY1BWeHFUMkZPSS8vcWsydi9aT2ZaR3Btak12ckNYMXQ0RlRTb0YzeW91ek9BR05oaWpxWDZSQk1icTI3MkFNCllPcGZRdzVmTkVQclJMY0N3R1NqdCs3M1FySzRHaDBSYkVhcHdJa2ZtQXRrVXg5OGxEMXBrd0pwaDVZZnAybXMKaWxVWmZGQVMwcWprUStRUEQra1dMVHlodlpBQ1FTTm9DRkRLUFB6RWN3MDlJZWV0RE9KVzhwVU5EeXRLL3NnRQpkcjBuakhJSzk5T2xha0pDQlNxNmtJQ1Y4Y3NIK1g1dnIwZ1BoVW90YWZ6eWtseGZHWUhjY0tUbytNOFZMeHd2CmxxSm14MFQwbno1NVVhNEJEVElKTWVFbkl0VS9WbXIxVElIbVE0aW1IVlBSUDMyb09tUlNUM3l3Q0JMeXJVTGkKV0RTbld0MjJzeWpvcDNJU2V2S2RBOEk0dEhXcVJBaWtlUGltWVQ5VUZrejNtdmhnRisvYjRRdHBnV3JQYm5DRApvMWZHWmlNMzdOZWo3eGpWdHFwbU5vTmYwSU9sclJHTURFaENRYUVnek95Y3FHdlBTZTRZOUMxeGtUd1lSTWZLCmMyYTMvVWU1WnAvdVR5dXVBWW9CL1hqL2p3LzAxMVhCVjZ5enZpTT0KPVFubW0KLS0tLS1FTkQgUEdQIFNJR05BVFVSRS0tLS0tCg==
placementRef:
  name: placement-policy-namespace
  kind: PlacementRule
  apiGroup: apps.open-cluster-management.io
subjects:
  - name: policy-namespace
    kind: Policy
    apiGroup: policy.open-cluster-management.io
---
apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: placement-policy-namespace
  annotations:
    integrityshield.io/message: H4sIAAAAAAAAA5VUTW/bMAy9+1cQ2aHAUGXdhgFDbm02DD20KJpil6EHxmISLbJkSLKXYNh/Hy1HiZ2PNtXJFslH8pF6WKqf5LyyZgSl1SpfD21JRuS68oGcKNDgnAoyYajsh/pjtlRGjuAhumYFBZQYcJQBGCwoYYjmx5eYExvQGBswcArf+MEZeXxAI9FJP4L728kTTB7g69WV+PL5zPgcA82tU8QA4zsYWzNT88rFIuBu63oumjXBWR2xxCe4QU9aGerDZr6kvOnPcZxU8e46D5FYZWbWFWyTyuNUExM4Q+0bcjZ8BSpKzUVvGBJgp78pD99opoyKIPG+OfjWiaXAdnK9ojdjTB7dcaZzfKyCVsgV09YxdZ/OSRbgHYQF7fcd44cHQaA82JqcU1KSgem6jXWUs5+ZQ4mOK+KuoUZdEXCCE0jDTm2eGFKF9Qi0/bPXauxuQprJt67bEACtmGLJZPwaLKspifeD555dma1d0gwrHXoO7UT3J52OgNyyQaHJ6WldMkrB41xgTT03eGEx+nO+T80w4Q0UNFi7FuGidFZeHAR3t6uzO+kc25AufbwpDJsJIbI37+lGWTRX19ze8C/P+IjGTFuLONCaMsU+0qwjSen2MCCRtU36WMWd5tp/OFuVI/4q/Qt1Z76K84jTFKc1cJto9+B2OV5l54DPV6o6wmZs7Ihcn+YmvehNBtYNqToiLoBFOlQsioMnV9FgsxAh7m4rsXK8F3pdo9KNAO5g+0+twJAvvq/4gXu/S9Uk+7skfq9kauWsaQq+BO6fVYxD4dZctgLg28dXD57/Zf8B64RAJNoGAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEtCQUFCQ2dBMEZpRUVDOFZXV2MvQlNhOXE3cENPcCtvcnBLeFFhdndGQW1BL1NIVVdISE5wWjI1bGNrQmwKYm5SbGNuQnlhWE5sTG1OdmJRQUtDUkNuNml1a3JGQnEvTzB5Qy80MTV4aVpPZE5Pc2VyOG94OXNUc0NaWVVLVQpJY1BWeHFUMkZPSS8vcWsydi9aT2ZaR3Btak12ckNYMXQ0RlRTb0YzeW91ek9BR05oaWpxWDZSQk1icTI3MkFNCllPcGZRdzVmTkVQclJMY0N3R1NqdCs3M1FySzRHaDBSYkVhcHdJa2ZtQXRrVXg5OGxEMXBrd0pwaDVZZnAybXMKaWxVWmZGQVMwcWprUStRUEQra1dMVHlodlpBQ1FTTm9DRkRLUFB6RWN3MDlJZWV0RE9KVzhwVU5EeXRLL3NnRQpkcjBuakhJSzk5T2xha0pDQlNxNmtJQ1Y4Y3NIK1g1dnIwZ1BoVW90YWZ6eWtseGZHWUhjY0tUbytNOFZMeHd2CmxxSm14MFQwbno1NVVhNEJEVElKTWVFbkl0VS9WbXIxVElIbVE0aW1IVlBSUDMyb09tUlNUM3l3Q0JMeXJVTGkKV0RTbld0MjJzeWpvcDNJU2V2S2RBOEk0dEhXcVJBaWtlUGltWVQ5VUZrejNtdmhnRisvYjRRdHBnV3JQYm5DRApvMWZHWmlNMzdOZWo3eGpWdHFwbU5vTmYwSU9sclJHTURFaENRYUVnek95Y3FHdlBTZTRZOUMxeGtUd1lSTWZLCmMyYTMvVWU1WnAvdVR5dXVBWW9CL1hqL2p3LzAxMVhCVjZ5enZpTT0KPVFubW0KLS0tLS1FTkQgUEdQIFNJR05BVFVSRS0tLS0tCg==
spec:
  clusterConditions:
    - status: "True"
      type: ManagedClusterConditionAvailable
  clusterSelector:
    matchExpressions:
      - {key: environment, operator: In, values: ["dev"]}
